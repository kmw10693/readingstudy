객체지향 설계 전체적 품질 결정 → 개별 객체 품질X, 협력의 품질

협력이 자리 잡으면 객체의 행동이 드러나고 적절한 객체의 상태가 결정된다. 

### 1. 협력

**요청하고 응답하며 협력하는 사람들**

협력의 본질은 요청과 응답으로 연결된  사람들의 네트워크

협력은 다수의 요청과 응답으로 구성되며 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성

**누가 파이를 훔쳤지?**

객체지향 세계는 동일한 목적을 달성하기 위해 협력하는 객체들의 공동체

**제한 속의 협력**

요청과 응답은 협력에 참여하는 객체가 수행할 책임을 정의 

### 2. 책임

객체가 책임을 가진다. 

1) 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있을 때

2) 적절한 행동을 할 의무가 있는 경우

객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것

**책임의 분류**

**책임**: 객체에 의해 정의되는 응집도 있는 행위의 집합,

객체가 알아야 하는 정보와 객체가 수행할 수 잇는 행위에 대해 개략적으로 서술한 문장 

객체의 **책임**은 ‘**객체가 무엇을 알고 있는가**’와 ‘**무엇을 할 수 있는가**’로 구성된다.

- 하는것(doing)

-객체를 생성하거나 계산을 하는 등의 스스로 하는 것

-다른 객체의 행동을 시작시키는 것

-다른 객체의 활동을 제어하고 조절하는 것 

- 아는것(knowing)

-개인적인 정보에 관해 아는 것

-관련된 객쳉 관해 아는 것

-자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

책임은 객체지향 설계의 품질을 결정하는 가장 중요한 요소

책임은 객체의 외부에 제공해 줄 수 있는 정보(아는 것의 측면)와 외부에 제공해 줄 수 있는 서비스(하는 것의 측면)의 목록 → 책임은 객체의 **공용 인터페이스**를 구성

**책임과 메시지**

-메시지 전송: 객체가 다른 객체에게 주어진 **책임**을 수행하도록 요청을 보내는 것

-송신자: 메시지를 전송함으로써 **협력**을 요청하는 객체

-수신자: 메시지를 받아 처리하는 객체

책임이 협력이라는 문맥 속에서 요청을 수신하는 하는 한 쪽의 객체 관점에서 무엇을 할 수 있는지를 나열하는 것이라면 메시지는 **협력**에 참여하는 두 객체 사이의 관계를 강조 한 것  

책임은 객체가 협력에 참여하기 위해 수행해야 하는 행위를 상위 수준에서 개략적으로 서술한 것 

**책임**을 결정한 후 **협력**을 정제하면서 이를 메시지로 변환할 때는 하나의 책임이 여러 메시지로 분활된다. 

### 3. 역할

**책임의 집합이 의미하는 것**

어떤 객체가 수행하는 **책임의 집합**은 객체가 **협력** 안에서 수행하는 **역할**을 암시

**판사와 증인**

**역할이 답이다** 

‘판사’와 ‘증인’이라는 역할을 사용하면 세 가지 협력을 모두 포괄할 수 있는 하나의 협력으로 추상화할 수 있다. 

역할은 대체할 수 있는 객체는 동인한 메시지를 이해할 수 있는 객체로 한정

동일한 역할을 수행할 수 있다는 것은 해당 객체들이 협력 내에서 동일한 책임의 집합을 수행할 수 있다는 것을 의미한다. 

역할은 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심개념

**협력의 추상화**

역할의 가장 큰 가치는 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 함으로써 협력을 추상화할 수 있다는 것

구체적인 객체를 **추상적인 역할**로 대체함으로써 하나의 **추상적인 협력**으로 대체할 수 있다. 

**대체 가능성**

객체는 역할이 암시하는 책임보다 더 많은 책임을 가질 수 있다. 

대부분의 경우 객체의 타입과 역할 사이에는 일반화/특수화 관계가 성립하는 것이 일반적

역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미

### 4. 객체의 모양을 결정하는 협력

**흔한 오류** 

선입견

1)데이터를 저장하기 위해 객체 존재 → 데이터는 단지 객체가 행위를 수행하는 데 필요한 재료일 뿐 실제로 중요한 것은 객체의 행동, 즉 책임이다.

2)객체지향이 클래스와 클래스 간의 관계를 표현하는 시스템의 정적인 측면에 중점을 둔다는 것 → 중요한 것은 정적인 클래스가 아니라 협력에 참여하는 **동적인 객체**이며, 클래스는 단지 시스템에 필요한 객체를 표현하고 생성하기 위해 프로그래밍 언어가 제공하는 구현 메커니즘이다. 

**협력을 따라 흐르는 객체의 책임**

올바른 객체 설계 →견고하고 깔끔한 협력 설계

객체의 행위에 초점을 맞추기 위해서는 협력이라는 실행 문맥 안에서 책임을 분배해야 한다. 

객체를 충분히 협력적으로 만든 후 협력이라는 문맥 안에서 객체를 충분히 자율적으로 만들어야 한다!

### 5. 객체지향 설계 기법

**책임-주도 설계** 

시스템의 책임을 객체의 책임으로 변환하고, 각 객체가 책임을 수행하는 중에 필요한 정보나 서비스를 제공해줄 협력자를 찾아 해당 협력자에게 책임을 할다하는 순차적인 방식으로 객체들의 협력 공동체를 구축한다. 

**디자인 패턴**

반복적으로 발생하는 문제와 그 문제에 대한 해법의 쌍으로 정의 

유사한 상황에서 반복적으로 적용할 수 있는 책임-주도 설계의 결과물

공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿

**테스트-주도 개발**

실패하는 테스트를 작성하고, 테스트를 통과하는 가장 간단한 코드를 작성한 후, 리페터링을 통해 중복을 제거하는 것

객체에게 어떤 메시지를 전송할 것인지에 관해 먼저 생각
